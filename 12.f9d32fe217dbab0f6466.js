(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"mwG+":function(e,t,a){"use strict";a.r(t),a.d(t,"TaskTemplatesModule",(function(){return B}));var c=a("sEIs"),s=a("Ecwh"),i=a("C05f"),l=a("ROBh"),n=a("SKbq"),o=a("gLp2"),r=a("jxfh"),m=a("cJ9h"),p=a("EM62"),T=a("OZ4H"),b=a("qFEQ"),k=a("CBLR"),u=a("FlRo"),h=a("bFHC");function d(e,t){1&e&&(p.Ub(0,"th",12),p.Pc(1,"Name"),p.Tb())}function f(e,t){if(1&e){const e=p.Vb();p.Ub(0,"td",13),p.gc("click",(function(){p.Dc(e);const a=t.$implicit;return p.kc().clickTaskTemplate(a)})),p.Pc(1),p.Tb()}if(2&e){const e=t.$implicit;p.Bb(1),p.Rc(" ",e.Name," ")}}function C(e,t){1&e&&(p.Ub(0,"th",12),p.Pc(1,"Type"),p.Tb())}function g(e,t){if(1&e){const e=p.Vb();p.Ub(0,"td",13),p.gc("click",(function(){p.Dc(e);const a=t.$implicit;return p.kc().clickTaskTemplate(a)})),p.Pc(1),p.Tb()}if(2&e){const e=t.$implicit;p.Bb(1),p.Rc(" ",1===e.TaskType?"Complete Form":"Complete Checklist"," ")}}function w(e,t){1&e&&(p.Ub(0,"th",12),p.Pc(1,"Location"),p.Tb())}function y(e,t){if(1&e){const e=p.Vb();p.Ub(0,"td",13),p.gc("click",(function(){p.Dc(e);const a=t.$implicit;return p.kc().clickTaskTemplate(a)})),p.Pc(1),p.Tb()}if(2&e){const e=t.$implicit;p.Bb(1),p.Rc(" ",e.LocationID," ")}}function D(e,t){1&e&&p.Pb(0,"th",14)}function S(e,t){if(1&e){const e=p.Vb();p.Ub(0,"td",15),p.Ub(1,"mat-icon",16),p.gc("click",(function(){p.Dc(e);const a=t.$implicit;return p.kc().clickDeleteTaskTemplate(a)})),p.Pc(2," delete "),p.Tb(),p.Tb()}}function v(e,t){1&e&&p.Pb(0,"tr",17)}function P(e,t){1&e&&p.Pb(0,"tr",18)}let I=(()=>{class e{constructor(){this.displayedColumns=["Name","Type","Location","Actions"],this.taskTemplates=[],this.taskTemplateItemClick=new p.o,this.deleteTaskTemplateItemClick=new p.o}clickTaskTemplate(e){this.taskTemplateItemClick.emit(e)}clickDeleteTaskTemplate(e){this.deleteTaskTemplateItemClick.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p.Ib({type:e,selectors:[["xenon-task-template-list"]],inputs:{taskTemplates:"taskTemplates"},outputs:{taskTemplateItemClick:"taskTemplateItemClick",deleteTaskTemplateItemClick:"deleteTaskTemplateItemClick"},decls:15,vars:3,consts:[["mat-table","",1,"mat-elevation-z0","overflow-y-auto",3,"dataSource"],["matColumnDef","Name"],["mat-header-cell","",4,"matHeaderCellDef"],["class","clickable","mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","Type"],["mat-cell","","class","clickable",3,"click",4,"matCellDef"],["matColumnDef","Location"],["matColumnDef","Actions"],["width","10","mat-header-cell","",4,"matHeaderCellDef"],["class","clickable","width","10","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"clickable",3,"click"],["width","10","mat-header-cell",""],["width","10","mat-cell","",1,"clickable"],["color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(p.Ub(0,"table",0),p.Sb(1,1),p.Nc(2,d,2,0,"th",2),p.Nc(3,f,2,1,"td",3),p.Rb(),p.Sb(4,4),p.Nc(5,C,2,0,"th",2),p.Nc(6,g,2,1,"td",5),p.Rb(),p.Sb(7,6),p.Nc(8,w,2,0,"th",2),p.Nc(9,y,2,1,"td",5),p.Rb(),p.Sb(10,7),p.Nc(11,D,1,0,"th",8),p.Nc(12,S,3,0,"td",9),p.Rb(),p.Nc(13,v,1,0,"tr",10),p.Nc(14,P,1,0,"tr",11),p.Tb()),2&e&&(p.sc("dataSource",t.taskTemplates),p.Bb(13),p.sc("matHeaderRowDef",t.displayedColumns),p.Bb(1),p.sc("matRowDefColumns",t.displayedColumns))},directives:[u.o,u.c,u.i,u.b,u.k,u.n,u.h,u.a,h.a,u.j,u.m],styles:[".mat-cell[_ngcontent-%COMP%], .mat-footer-cell[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%], mat-cell[_ngcontent-%COMP%], mat-footer-cell[_ngcontent-%COMP%], mat-header-cell[_ngcontent-%COMP%]{padding:0 .4rem}table[_ngcontent-%COMP%]{margin-bottom:80px}"]}),e})();var O=a("PBFl"),U=a("2kYt");const N=[{path:"",component:(()=>{class e extends o.a{constructor(e,t,a,c,s){super(),this.uiPromptService=e,this.notificationService=t,this.apiTaskTemplateService=a,this.localStorageService=c,this.dialog=s,this.taskTemplates$=new i.a([]),this.search$=new i.a(null),this.columnsToSearchBy=["Name","Type","Location","Actions"],this.loggedInUser=this.localStorageService.getItem("user"),this.searchPipe=new n.a}ngOnInit(){this.refreshData()}ngOnDestroy(){this.subscriptions.unsubscribe()}searchChange(e){const t=this.searchPipe.transform(this.cachedTemplates,e,this.columnsToSearchBy);this.taskTemplates$.next(t)}openTaskTemplateTask(e){this.apiTaskTemplateService.getTaskTemplateByTemplateID(e.ID).subscribe(e=>{this.openDialog(e)})}createTaskTemplate(){this.taskTemplates$.value||this.taskTemplates$.next([]),this.openDialog(null,!0)}deleteTaskTemplate(e){const t=this.uiPromptService.prompt(`Are you sure you sure you want to delete "${e.Name}"?`).afterClosed().pipe(Object(m.a)(t=>t.ok?this.apiTaskTemplateService.deleteTaskTemplate(e.ID):Object(l.a)({Message:"Delete not performed"}))).subscribe(e=>{this.notificationService.show(r.NotificationType.success,"Close","Deleted Task Template",2500),setTimeout(()=>{this.refreshData()},2500)});this.subscriptions.add(t)}refreshData(){const e=this.apiTaskTemplateService.getTaskTemplatesByOrgID(this.loggedInUser.CurrentOrg.ID).subscribe(e=>{this.cachedTemplates=e,this.taskTemplates$.next(e)});this.subscriptions.add(e)}openDialog(e,t=!1){this.dialog.open(r.EditTaskTemplateComponent,{data:{task:e||"new",newTask:t},panelClass:"full-page-dialog"}).afterClosed().subscribe(e=>{e&&(t&&this.taskTemplates$.next(this.taskTemplates$.getValue().concat(e)),this.apiTaskTemplateService.updateTaskTemplateBatch(e).subscribe(e=>{this.notificationService.show(r.NotificationType.success,"Action done","Task saved",2500)}))})}}return e.\u0275fac=function(t){return new(t||e)(p.Ob(r.UiPromptService),p.Ob(r.UiNotificationService),p.Ob(s.ApiTaskTemplateService),p.Ob(n.f),p.Ob(T.b))},e.\u0275cmp=p.Ib({type:e,selectors:[["xenon-task-templates"]],features:[p.yb],decls:11,vars:7,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"page-header"],[1,"title"],[3,"searchString","label","searchChange"],[1,"page-body"],[3,"taskTemplates","taskTemplateItemClick","deleteTaskTemplateItemClick"],["mat-fab","","mat-flat-button","","color","primary","aria-label","Create new Task Template",1,"add-button",3,"click"]],template:function(e,t){1&e&&(p.Ub(0,"div",0),p.Ub(1,"h6",1),p.Pc(2,"Task Templates"),p.Tb(),p.Ub(3,"xenon-ui-string-search",2),p.gc("searchChange",(function(e){return t.searchChange(e)})),p.lc(4,"async"),p.Tb(),p.Tb(),p.Ub(5,"div",3),p.Ub(6,"xenon-task-template-list",4),p.gc("taskTemplateItemClick",(function(e){return t.openTaskTemplateTask(e)}))("deleteTaskTemplateItemClick",(function(e){return t.deleteTaskTemplate(e)})),p.lc(7,"async"),p.Tb(),p.Tb(),p.Ub(8,"button",5),p.gc("click",(function(){return t.createTaskTemplate()})),p.Ub(9,"mat-icon"),p.Pc(10,"add"),p.Tb(),p.Tb()),2&e&&(p.Bb(3),p.sc("searchString",p.mc(4,3,t.search$))("label","Search Templates"),p.Bb(3),p.sc("taskTemplates",p.mc(7,5,t.taskTemplates$)))},directives:[b.f,b.e,k.a,I,O.b,h.a],pipes:[U.b],styles:[".add-button[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;border-radius:30px}"]}),e})()}];let $=(()=>{class e{}return e.\u0275mod=p.Mb({type:e}),e.\u0275inj=p.Lb({factory:function(t){return new(t||e)},imports:[[c.f.forChild(N)],c.f]}),e})();var x=a("PCNd");let B=(()=>{class e{}return e.\u0275mod=p.Mb({type:e}),e.\u0275inj=p.Lb({factory:function(t){return new(t||e)},imports:[[x.a,$,r.UiTaskTemplatesModule]]}),e})()}}]);