(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{LejY:function(t,o,n){"use strict";n.r(o),n.d(o,"TasksModule",(function(){return F}));var e=n("2kYt"),c=n("sEIs"),r=n("cePI"),a=n("FlRo"),i=n("Ecwh"),s=n("xsw0"),l=n("kuMc"),d=n("YtkY"),b=n("cJ9h"),m=n("ZTXN"),u=n("jxfh"),g=n("SKbq"),p=n("EM62"),h=n("OZ4H"),k=n("PBFl"),f=n("bFHC");function C(t,o){1&t&&(p.Ub(0,"th",11),p.Pc(1,"Recurring Task"),p.Tb())}function T(t,o){if(1&t&&(p.Ub(0,"td",12),p.Ub(1,"mat-icon",13),p.Pc(2,"event"),p.Tb(),p.Pc(3),p.Tb()),2&t){const t=o.$implicit;p.Bb(3),p.Rc(" ",t.Name," ")}}function O(t,o){1&t&&(p.Ub(0,"th",11),p.Pc(1,"Description"),p.Tb())}function P(t,o){if(1&t&&(p.Ub(0,"td",12),p.Pc(1),p.Tb()),2&t){const t=o.$implicit;p.Bb(1),p.Rc(" ",t.Description," ")}}function M(t,o){1&t&&p.Pb(0,"th",14)}function _(t,o){if(1&t){const t=p.Vb();p.Ub(0,"td",12),p.Ub(1,"button",15),p.gc("click",(function(n){p.Dc(t);const e=o.$implicit;return p.kc().removeTask(e,n)})),p.Ub(2,"mat-icon"),p.Pc(3,"delete_outline"),p.Tb(),p.Tb(),p.Tb()}}function w(t,o){1&t&&p.Pb(0,"tr",16)}function y(t,o){if(1&t){const t=p.Vb();p.Ub(0,"tr",17),p.gc("click",(function(){p.Dc(t);const n=o.$implicit;return p.kc().editTask(n)})),p.Tb()}}const v=[{path:"",component:(()=>{class t{constructor(t,o,n,e,c){this.dialog=t,this.formBuilderService=o,this.apiTaskService=n,this.notificationService=e,this.localStorage=c,this.taskList=[],this.displayedColumns=["name","desc","remove"],this.dataSource=new a.p(this.taskList),this.unsubscribe=new m.a}ngOnInit(){this.formBuilderService.currentForm.pipe(Object(l.a)(this.unsubscribe)).subscribe(t=>{this.currentForm=t}),this.formBuilderService.currentForm.pipe(Object(l.a)(this.unsubscribe),Object(d.a)(t=>(this.currentForm=t,this.currentForm.ID)),Object(b.a)(t=>this.apiTaskService.getTasksByFormTemplate(t))).subscribe(t=>{this.taskList=t.TaskTemplateList,this.dataSource=new a.p(this.taskList)});const t=this.localStorage.getItem("user").CurrentUser;this.user=t}ngAfterViewInit(){this.dataSource.sort=this.sort}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}addTask(){this.taskList||(this.taskList=[]);const t={OrgID:this.currentForm.OrgID,LocationID:this.currentForm.LocationID,TaskType:1,TaskTypeID:this.currentForm.ID,Name:"New Task "+(this.taskList.length+1),Description:"",CreatedBy:this.user.ID};this.apiTaskService.addTaskTemplate(t).subscribe(o=>{t.ID=o.TaskTemplateId,this.taskList.push(t),this.dataSource=new a.p(this.taskList),this.showTaskNotification()})}editTask(t){console.log(t),this.dialog.open(u.EditTaskTemplateComponent,{data:{task:t,forceTemplate:"form"},panelClass:"full-page-dialog"}).afterClosed().subscribe(t=>{this.apiTaskService.updateTaskTemplate(t).subscribe(t=>{this.showTaskNotification()})})}removeTask(t,o){o.stopPropagation(),this.apiTaskService.deleteTaskTemplate(t.ID).subscribe(o=>{const n=this.taskList.indexOf(t);n>-1&&(this.taskList.splice(n,1),this.dataSource=new a.p(this.taskList))})}showTaskNotification(){this.notificationService.show(u.NotificationType.success,"Action done","Task saved",2500)}}return t.\u0275fac=function(o){return new(o||t)(p.Ob(h.b),p.Ob(s.b),p.Ob(i.ApiTaskService),p.Ob(u.UiNotificationService),p.Ob(g.f))},t.\u0275cmp=p.Ib({type:t,selectors:[["xenon-tasks"]],viewQuery:function(t,o){var n;1&t&&p.Uc(r.a,!0),2&t&&p.zc(n=p.hc())&&(o.sort=n.first)},decls:17,vars:3,consts:[["mat-table","","matSort","",3,"dataSource"],["matColumnDef","name"],["class","text-body1","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","text-body1","mat-cell","",4,"matCellDef"],["matColumnDef","desc"],["matColumnDef","remove"],["class","text-body1","mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"add-button-container"],["mat-raised-button","","aria-label","Add Task",3,"click"],["mat-header-cell","","mat-sort-header","",1,"text-body1"],["mat-cell","",1,"text-body1"],[1,"task-type-icon","color-primary"],["mat-header-cell","",1,"text-body1"],["mat-button","","aria-label","Remove Task",3,"click"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(t,o){1&t&&(p.Ub(0,"table",0),p.Sb(1,1),p.Nc(2,C,2,0,"th",2),p.Nc(3,T,4,1,"td",3),p.Rb(),p.Sb(4,4),p.Nc(5,O,2,0,"th",2),p.Nc(6,P,2,1,"td",3),p.Rb(),p.Sb(7,5),p.Nc(8,M,1,0,"th",6),p.Nc(9,_,4,0,"td",3),p.Rb(),p.Nc(10,w,1,0,"tr",7),p.Nc(11,y,1,0,"tr",8),p.Tb(),p.Ub(12,"div",9),p.Ub(13,"button",10),p.gc("click",(function(){return o.addTask()})),p.Ub(14,"mat-icon"),p.Pc(15,"add"),p.Tb(),p.Pc(16," Create Task"),p.Tb(),p.Tb()),2&t&&(p.sc("dataSource",o.dataSource),p.Bb(10),p.sc("matHeaderRowDef",o.displayedColumns),p.Bb(1),p.sc("matRowDefColumns",o.displayedColumns))},directives:[a.o,r.a,a.c,a.i,a.b,a.k,a.n,k.b,f.a,a.h,r.b,a.a,a.j,a.m],styles:[".color-red[_ngcontent-%COMP%]{color:#e60404!important}.color-red-dark[_ngcontent-%COMP%]{color:#ad1b1b!important}.color-red-light[_ngcontent-%COMP%]{color:#ffcdd2!important}.color-gray[_ngcontent-%COMP%]{color:#586069!important}.color-gray-light[_ngcontent-%COMP%]{color:#f7f8f8!important}.color-white[_ngcontent-%COMP%]{color:#fff!important}.color-black[_ngcontent-%COMP%]{color:#000!important}.color-border-light[_ngcontent-%COMP%]{color:#e0e0e0!important}.color-primary[_ngcontent-%COMP%]{color:#048be6!important}.color-primary-dark[_ngcontent-%COMP%]{color:#005797!important}.color-primary-light[_ngcontent-%COMP%]{color:#def2fe!important}.color-accent[_ngcontent-%COMP%]{color:#037dd1!important}.background-red[_ngcontent-%COMP%]{background-color:#e60404!important}.background-red-dark[_ngcontent-%COMP%]{background-color:#ad1b1b!important}.background-red-light[_ngcontent-%COMP%]{background-color:#ffcdd2!important}.background-gray[_ngcontent-%COMP%]{background-color:#586069!important}.background-gray-light[_ngcontent-%COMP%]{background-color:#f7f8f8!important}.background-white[_ngcontent-%COMP%]{background-color:#fff!important}.background-black[_ngcontent-%COMP%]{background-color:#000!important}.background-border-light[_ngcontent-%COMP%]{background-color:#e0e0e0!important}.background-primary[_ngcontent-%COMP%]{background-color:#048be6!important}.background-primary-dark[_ngcontent-%COMP%]{background-color:#005797!important}.background-primary-light[_ngcontent-%COMP%]{background-color:#def2fe!important}.background-accent[_ngcontent-%COMP%]{background-color:#037dd1!important}.background-gradient[_ngcontent-%COMP%]{background:linear-gradient(180deg,#fff,#def2fe 78.12%,#e6f5fe)!important}table[_ngcontent-%COMP%]{width:100%}th.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#000}th[_ngcontent-%COMP%]{border-bottom:1px solid #a3a9b0}tr[_ngcontent-%COMP%]   mat-button[_ngcontent-%COMP%]{color:#fff}tr[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:inline-flex;vertical-align:middle;color:#fff;width:20px;height:20px}tr[_ngcontent-%COMP%]:hover{background-color:#f0f1f2}tr[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#586069}.task-type-icon[_ngcontent-%COMP%]{width:15px!important;height:15px!important;margin-right:15px}.add-button-container[_ngcontent-%COMP%]{position:absolute;bottom:20px;right:20px}.add-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:32px;margin:5px}.task-value[_ngcontent-%COMP%]{padding-right:5px}.mat-column-edit[_ngcontent-%COMP%], .mat-column-remove[_ngcontent-%COMP%]{width:64px}"]}),t})()}];let D=(()=>{class t{}return t.\u0275mod=p.Mb({type:t}),t.\u0275inj=p.Lb({factory:function(o){return new(o||t)},imports:[[c.f.forChild(v)],c.f]}),t})();var S=n("Cd2c"),x=n("nIj0"),U=n("gcUQ"),I=n("mFH5"),L=n("F1o0"),N=n("R7+U");let F=(()=>{class t{}return t.\u0275mod=p.Mb({type:t}),t.\u0275inj=p.Lb({factory:function(o){return new(o||t)},imports:[[e.c,D,a.q,r.c,f.b,k.c,h.g,S.c,x.n,U.m,I.n,L.c,N.b,u.UiTaskTemplatesModule]]}),t})()}}]);