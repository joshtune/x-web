{"version":3,"sources":["./src/app/features/admin/form-templates/form-template-list/form-template-list.component.ts","./src/app/features/admin/form-templates/form-template-list/form-template-list.component.html","./src/app/features/admin/form-templates/form-templates-routing.module.ts","./src/app/features/admin/form-templates/form-templates.component.ts","./src/app/features/admin/form-templates/form-templates.module.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuE;;;;;ICEnE,yEAAsC;IAAA,+DAAI;IAAA,4DAAK;;;;IAC/C,yEACE;IAD6B,iXAAoC;IACjE,uDACF;IAAA,4DAAK;;;IADH,0DACF;IADE,4FACF;;;IAIA,yEAAyD;IAAA,yEAAc;IAAA,4DAAK;;;;IAC5E,yEACE;IADW,iXAAoC;IAC/C,uDACF;IAAA,4DAAK;;;IADH,0DACF;IADE,sGACF;;;IAIA,yEAAyD;IAAA,6DAAE;IAAA,4DAAK;;;;IAChE,yEACE;IADW,iXAAoC;IAC/C,uDACF;IAAA,4DAAK;;;IADH,0DACF;IADE,0FACF;;;IAIA,oEAAsD;;;;IACtD,yEACE;IAAA,+EACE;IADwB,8XAA0C;IAClE,mEACF;IAAA,4DAAW;IACb,4DAAK;;;IAGP,oEAA4D;;;IAC5D,oEAAiE;;ADxB5D,MAAM,yBAAyB;IALtC;QAME,qBAAgB,GAAa,CAAC,MAAM,EAAE,gBAAgB,EAAE,IAAI,EAAE,SAAS,CAAC,CAAC;QAEhE,kBAAa,GAAmB,EAAE,CAAC;QAClC,0BAAqB,GAAG,IAAI,0DAAY,EAAgB,CAAC;QACzD,gCAA2B,GAAG,IAAI,0DAAY,EAAgB,CAAC;KAS1E;IAPQ,iBAAiB,CAAC,MAAoB;QAC3C,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC1C,CAAC;IAEM,uBAAuB,CAAC,MAAoB;QACjD,IAAI,CAAC,2BAA2B,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAChD,CAAC;;kGAbU,yBAAyB;yGAAzB,yBAAyB;QCRtC,2EACE;QAAA,2EACE;QAAA,mHAAsC;QACtC,mHACE;QAEJ,qEAAe;QAEf,2EACE;QAAA,mHAAyD;QACzD,mHACE;QAEJ,qEAAe;QAEf,2EACE;QAAA,mHAAyD;QACzD,mHACE;QAEJ,qEAAe;QAEf,4EACE;QAAA,qHAAiD;QACjD,sHACE;QAIJ,qEAAe;QAEf,sHAAuD;QACvD,sHAA4D;QAC9D,4DAAQ;;QAjCS,yFAA4B;QA+BxB,2DAAmC;QAAnC,iGAAmC;QAC1C,0DAA+C;QAA/C,kGAA+C;;6FDxBhD,yBAAyB;cALrC,uDAAS;eAAC;gBACT,QAAQ,EAAE,0BAA0B;gBACpC,WAAW,EAAE,qCAAqC;gBAClD,SAAS,EAAE,CAAC,qCAAqC,CAAC;aACnD;gBAIU,aAAa;kBAArB,mDAAK;YACI,qBAAqB;kBAA9B,oDAAM;YACG,2BAA2B;kBAApC,oDAAM;;;;;;;;;;;;;;AEbT;AAAA;AAAA;AAAA;AAAA;AAAyC;AACc;AACa;;;AAEpE,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,gFAAsB;KAClC;CACF,CAAC;AAMK,MAAM,0BAA0B;;yGAA1B,0BAA0B;8KAA1B,0BAA0B,kBAH5B,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAC9B,4DAAY;mIAEX,0BAA0B,uFAF3B,4DAAY;6FAEX,0BAA0B;cAJtC,sDAAQ;eAAC;gBACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;gBACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;aACxB;;;;;;;;;;;;;;ACdD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6D;AACW;AAC7B;AACwB;AACZ;AACK;AACyB;AAC5C;;;;;;;;;;;;AAuBlC,MAAM,sBAAuB,SAAQ,4DAAS;IAQnD,YACS,eAAgC,EAChC,mBAA0C,EACzC,oBAA0C,EAC1C,sBAA8C,EAC9C,mBAA4C;QAEpD,KAAK,EAAE,CAAC;QAND,oBAAe,GAAf,eAAe,CAAiB;QAChC,wBAAmB,GAAnB,mBAAmB,CAAuB;QACzC,yBAAoB,GAApB,oBAAoB,CAAsB;QAC1C,2BAAsB,GAAtB,sBAAsB,CAAwB;QAC9C,wBAAmB,GAAnB,mBAAmB,CAAyB;QAZtD,mBAAc,GAAoC,IAAI,oDAAe,CAAiB,EAAE,CAAC,CAAC;QAC1F,YAAO,GAA4B,IAAI,oDAAe,CAAC,IAAI,CAAC,CAAC;QAGrD,sBAAiB,GAAG,CAAC,MAAM,EAAE,IAAI,EAAE,gBAAgB,CAAC,CAAC;QAW3D,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAC7D,IAAI,CAAC,UAAU,GAAG,IAAI,uDAAU,EAAE,CAAC;IACrC,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IAED,WAAW;QACT,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;IACnC,CAAC;IAEM,YAAY,CAAC,WAAmB;QACrC,MAAM,iBAAiB,GAAmB,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,EAAE,WAAW,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAC/H,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;IAC9C,CAAC;IAEM,oBAAoB,CAAC,YAA2B;QACrD,MAAM,UAAU,GAAG,YAAY,CAAC,CAAC,CAAC,yBAAyB,YAAY,CAAC,EAAE,mBAAmB,YAAY,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,wBAAwB,CAAC;QACtJ,IAAI,CAAC,oBAAoB,CAAC,aAAa,CAAC,mDAAO,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC;IAC3E,CAAC;IAEM,kBAAkB,CAAC,YAA2B;QACnD,MAAM,GAAG,GAAG,IAAI,CAAC,eAAe;aAC7B,MAAM,CAAC,6CAA6C,YAAY,CAAC,IAAI,IAAI,CAAC;aAC1E,WAAW,EAAE;aACb,IAAI,CACH,8DAAO,CAAC,CAAC,CAAkB,EAAE,EAAE;YAC7B,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,sBAAsB,CAAC,kBAAkB,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,+CAAE,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC,CAAC;QAC1G,CAAC,CAAC,CACH;aACA,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE;YACf,IAAI,CAAC,CAAC,MAAM,KAAK,SAAS,EAAE;gBAC1B,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,0DAAgB,CAAC,OAAO,EAAE,OAAO,EAAE,uBAAuB,EAAE,IAAI,CAAC,CAAC;gBAChG,UAAU,CAAC,GAAG,EAAE;oBACd,IAAI,CAAC,WAAW,EAAE,CAAC;gBACrB,CAAC,EAAE,IAAI,CAAC,CAAC;aACV;QACH,CAAC,CAAC,CAAC;QACL,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IAC9B,CAAC;IAEO,WAAW;QACjB,MAAM,GAAG,GAAG,IAAI,CAAC,sBAAsB,CAAC,qBAAqB,CAAC,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,GAAG,EAAE,EAAE;YAC/G,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC;YAC3B,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAChC,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IAC9B,CAAC;;4FAhEU,sBAAsB;sGAAtB,sBAAsB;QAjB/B,yEACE;QAAA,wEAAkB;QAAA,yEAAc;QAAA,4DAAK;QACrC,4FAAsJ;QAA7F,kLAAgB,wBAAoB,IAAC;;QAA+B,4DAAyB;QACxJ,4DAAM;QAEN,yEACE;QAAA,8FAI4B;QAF1B,sMAAyB,gCAA4B,IAAC,0JACvB,8BAA0B,IADH;;QAEvD,4DAA2B;QAC5B,4EACE;QAD8B,8IAAS,0BAAsB,IAAC;QAC9D,2EAAU;QAAA,+DAAG;QAAA,4DAAW;QAC1B,4DAAS;QACX,4DAAM;;QAZoB,0DAAgC;QAAhC,sJAAgC;QAKtD,0DAAwC;QAAxC,8JAAwC;;6FAUnC,sBAAsB;cArBlC,uDAAS;eAAC;gBACT,QAAQ,EAAE,sBAAsB;gBAChC,SAAS,EAAE,CAAC,iCAAiC,CAAC;gBAC9C,QAAQ,EAAE;;;;;;;;;;;;;;;;GAgBT;aACF;;;;;;;;;;;;;;AC7BD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;AAEoC;AACT;AAC0B;AACjC;;AAMtD,MAAM,mBAAmB;;kGAAnB,mBAAmB;gKAAnB,mBAAmB,kBAFrB,CAAC,kEAAY,EAAE,yFAA0B,CAAC;mIAExC,mBAAmB,mBAHf,gFAAsB,EAAE,0GAAyB,aACtD,kEAAY,EAAE,yFAA0B;6FAEvC,mBAAmB;cAJ/B,sDAAQ;eAAC;gBACR,YAAY,EAAE,CAAC,gFAAsB,EAAE,0GAAyB,CAAC;gBACjE,OAAO,EAAE,CAAC,kEAAY,EAAE,yFAA0B,CAAC;aACpD","file":"form-templates-form-templates-module.js","sourcesContent":["import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { FormTemplate } from '@xenon/api';\n\n@Component({\n  selector: 'xenon-form-template-list',\n  templateUrl: './form-template-list.component.html',\n  styleUrls: ['./form-template-list.component.scss'],\n})\nexport class FormTemplateListComponent {\n  displayedColumns: string[] = ['Name', 'FormCategoryID', 'ID', 'Actions'];\n\n  @Input() formTemplates: FormTemplate[] = [];\n  @Output() formTemplateItemClick = new EventEmitter<FormTemplate>();\n  @Output() deleteFormTemplateItemClick = new EventEmitter<FormTemplate>();\n\n  public clickFormTemplate(record: FormTemplate): void {\n    this.formTemplateItemClick.emit(record);\n  }\n\n  public clickDeleteFormTemplate(record: FormTemplate): void {\n    this.deleteFormTemplateItemClick.emit(record);\n  }\n}\n","<table mat-table [dataSource]=\"formTemplates\" class=\"mat-elevation-z0\">\n  <ng-container matColumnDef=\"Name\">\n    <th mat-header-cell *matHeaderCellDef>Name</th>\n    <td class=\"clickable\" mat-cell (click)=\"clickFormTemplate(element)\" *matCellDef=\"let element\">\n      {{ element.Name }}\n    </td>\n  </ng-container>\n\n  <ng-container matColumnDef=\"FormCategoryID\">\n    <th mat-header-cell class=\"text-right\" *matHeaderCellDef>FormCategoryID</th>\n    <td mat-cell (click)=\"clickFormTemplate(element)\" *matCellDef=\"let element\" class=\"text-right clickable\">\n      {{ element.FormCategoryID }}\n    </td>\n  </ng-container>\n\n  <ng-container matColumnDef=\"ID\">\n    <th mat-header-cell class=\"text-right\" *matHeaderCellDef>ID</th>\n    <td mat-cell (click)=\"clickFormTemplate(element)\" *matCellDef=\"let element\" class=\"text-right clickable\">\n      {{ element.ID }}\n    </td>\n  </ng-container>\n\n  <ng-container matColumnDef=\"Actions\">\n    <th width=\"10\" mat-header-cell *matHeaderCellDef></th>\n    <td class=\"clickable\" width=\"10\" mat-cell *matCellDef=\"let element\">\n      <mat-icon color=\"primary\" (click)=\"clickDeleteFormTemplate(element)\">\n        delete\n      </mat-icon>\n    </td>\n  </ng-container>\n\n  <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\n  <tr mat-row *matRowDef=\"let row; columns: displayedColumns\"></tr>\n</table>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { FormTemplatesComponent } from './form-templates.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FormTemplatesComponent,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class FormTemplatesRoutingModule {}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ApiFormTemplateService, FormTemplate, User } from '@xenon/api';\nimport { BehaviorSubject, of } from 'rxjs';\nimport { UtilLocalStorageService, SearchPipe } from '@xenon/utils';\nimport { AdminBase } from '../../../shared/admin-base';\nimport { AppList, AppNavigationService } from '@xenon/auth';\nimport { NotificationType, UiNotificationService, UiPromptService } from '@xenon/ui';\nimport { flatMap } from 'rxjs/operators';\n\n@Component({\n  selector: 'xenon-form-templates',\n  styleUrls: ['./form-templates.component.scss'],\n  template: `\n    <div class=\"page-header\" fxLayout=\"row\" fxLayoutAlign=\"space-between center\">\n      <h6 class=\"title\">Form Templates</h6>\n      <xenon-ui-string-search [searchString]=\"search$ | async\" (searchChange)=\"searchChange($event)\" [label]=\"'Search Templates'\"> </xenon-ui-string-search>\n    </div>\n\n    <div class=\"page-body\">\n      <xenon-form-template-list\n        [formTemplates]=\"formTemplates$ | async\"\n        (formTemplateItemClick)=\"openFormTemplateForm($event)\"\n        (deleteFormTemplateItemClick)=\"deleteFormTemplate($event)\"\n      ></xenon-form-template-list>\n      <button mat-fab mat-flat-button (click)=\"openFormTemplateForm()\" class=\"add-button\" color=\"primary\" aria-label=\"Create new Form Template\">\n        <mat-icon>add</mat-icon>\n      </button>\n    </div>\n  `,\n})\nexport class FormTemplatesComponent extends AdminBase implements OnInit, OnDestroy {\n  formTemplates$: BehaviorSubject<FormTemplate[]> = new BehaviorSubject<FormTemplate[]>([]);\n  search$: BehaviorSubject<string> = new BehaviorSubject(null);\n\n  private cachedTemplates: FormTemplate[];\n  private columnsToSearchBy = ['Name', 'ID', 'FormCategoryID'];\n  private searchPipe: SearchPipe;\n\n  constructor(\n    public uiPromptService: UiPromptService,\n    public notificationService: UiNotificationService,\n    private appNavigationService: AppNavigationService,\n    private apiFormTemplateService: ApiFormTemplateService,\n    private localStorageService: UtilLocalStorageService\n  ) {\n    super();\n    this.loggedInUser = this.localStorageService.getItem('user');\n    this.searchPipe = new SearchPipe();\n  }\n\n  ngOnInit(): void {\n    this.refreshData();\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n\n  public searchChange(searchInput: string): void {\n    const filteredTemplates: FormTemplate[] = this.searchPipe.transform(this.cachedTemplates, searchInput, this.columnsToSearchBy);\n    this.formTemplates$.next(filteredTemplates);\n  }\n\n  public openFormTemplateForm(formTemplate?: FormTemplate): void {\n    const append2Url = formTemplate ? `layout?action=edit&id=${formTemplate.ID}&formCategoryId=${formTemplate.FormCategoryID}` : '#/layout?action=create';\n    this.appNavigationService.navigateToApp(AppList.FormBuilder, append2Url);\n  }\n\n  public deleteFormTemplate(formTemplate?: FormTemplate): void {\n    const sub = this.uiPromptService\n      .prompt(`Are you sure you sure you want to delete \"${formTemplate.Name}\"?`)\n      .afterClosed()\n      .pipe(\n        flatMap((r: { ok: boolean }) => {\n          return r.ok ? this.apiFormTemplateService.deleteFormTemplate(formTemplate.ID) : of({ Status: 'empty' });\n        })\n      )\n      .subscribe((m) => {\n        if (m.Status === 'success') {\n          this.notificationService.show(NotificationType.success, 'Close', 'Deleted Form Template', 2500);\n          setTimeout(() => {\n            this.refreshData();\n          }, 2500);\n        }\n      });\n    this.subscriptions.add(sub);\n  }\n\n  private refreshData(): void {\n    const sub = this.apiFormTemplateService.getFormTemplatesByOrg(this.loggedInUser.CurrentOrg.ID).subscribe((res) => {\n      this.cachedTemplates = res;\n      this.formTemplates$.next(res);\n    });\n    this.subscriptions.add(sub);\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport { FormTemplatesRoutingModule } from './form-templates-routing.module';\nimport { FormTemplatesComponent } from './form-templates.component';\nimport { FormTemplateListComponent } from './form-template-list/form-template-list.component';\nimport { SharedModule } from '../../../shared/shared.module';\n\n@NgModule({\n  declarations: [FormTemplatesComponent, FormTemplateListComponent],\n  imports: [SharedModule, FormTemplatesRoutingModule],\n})\nexport class FormTemplatesModule {}\n"],"sourceRoot":"webpack:///"}